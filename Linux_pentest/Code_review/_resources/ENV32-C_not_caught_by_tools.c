#include <assert.h>
#include <limits.h>
#include <stddef.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <stdbool.h>
#include <setjmp.h>

/* 
    This C snippet exhibits errors caught by neither gcc, nor clang-tidy, nor splint

*/
void exit1(void) {
  /* ... Cleanup code ... */
  return;
}
  
void exit2(void) {
  int some_condition=true;
  if (some_condition) {
    /* ... More cleanup code ... */
    exit(0);
  }
  return;
}
 
 
jmp_buf env;
int val;
 
void exit3(void) {
  longjmp(env, 1);
}
 
int main(void) {
  if (atexit(exit1) != 0) {
    /* Handle error */
  }
  if (atexit(exit2) != 0) {
    /* Handle error */
  }
  if (atexit(exit3) != 0) {
    /* Handle error */
  }
  if (setjmp(env) == 0) {
    exit(0);
  } else {
    return 0;
  }
}
