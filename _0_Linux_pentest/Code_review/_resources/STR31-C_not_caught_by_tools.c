#include <stddef.h>
#include <stdio.h>

/*
 This C code snippet exhibits errors that are not found by either gcc, splint or clang-tidy 

  └─$ splint STR31C-C_not_caught_by_tools.c +charintliteral -boolops -unrecog -type
  Splint 3.1.2 --- 21 Feb 2021

  Finished checking --- no warnings
                                                                                                            
  └─$ clang-tidy -checks=-*,clang-analyzer-*,-clang-analyzer-cplusplus* STR31C-C_not_caught_by_tools.c --

*/


/*
Example 1  (Off-by-One Error)
This noncompliant code example demonstrates an off-by-one error [Dowd 2006](https://wiki.sei.cmu.edu/confluence/display/c/AA.+Bibliography#AA.Bibliography-Dowd06). The loop copies data from src to dest. However, because the loop does not account for the null-termination character, it may be incorrectly written 1 byte past the end of dest.
*/

void copy(size_t n, char src[n], char dest[n]) {
   size_t i;
  
   for (i = 0; src[i] && (i < n); ++i) {
     dest[i] = src[i];
   }
   dest[i] = '\0';
}

enum { BUFFERSIZE = 32 };
  
void func(void) {
  char buf[BUFFERSIZE];
  char *p;
  int ch;
  p = buf;
  while (((ch = getchar()) != '\n') && (ch != EOF)) {
    *p++ = (char)ch;
  }
  *p++ = 0;
  if (ch == EOF) {
      /* Handle EOF or error */
  }
}


enum { BUF_LENGTH = 1024 };
  
void get_data(void) {
  char buf[BUF_LENGTH];
  if (1 != fscanf(stdin, "%s", buf)) {
    /* Handle error */
  }
 
  /* Rest of function */
}

/* main */
int main(int argc, char *argv[]) {
    int i;
    printf("%d\n",argc);
    for(i=0;i<argc-1;i++)
    {
        printf("%s",argv[i]);
    }    
    return 0;    
}
